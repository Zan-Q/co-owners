import{r as b,j as e}from"./jsx-runtime-D2HyDbKh.js";import{B as i,Q as F,t as y}from"./transactionAPI-BMleeZxG.js";/* empty css                      */import{i as B}from"./lib-Le9o1phv.js";import{b as D}from"./components-BulwabtP.js";import{a as L}from"./index-PxjvPj8E.js";import"./axiosConfig-D8aEX1dT.js";import"./clsx-B-dksMZM.js";import"./index-Cd_vq22D.js";function M(){const{business:s,transactionType:N,balance:x,token:d,message:w}=D(),[f,C]=b.useState(!!d),n=L();w&&i.success("Deposit Successful");const v=async t=>{if(f)try{const l=await y.buyStock(s.id,t,d);l&&l.status===200&&(i.success("Your buy order has been placed or completed successfully"),n("/dashboard"))}catch(l){const a=new URLSearchParams({type:"Buy",businessId:s.id,balance:x,message:"deposit"}).toString(),m=Math.ceil((t*.029+.3)*100)/100,u=Math.ceil((t+m+.1)*100)/100,h="/stripe?"+new URLSearchParams({amount:u.toFixed(2).toString(),businessId:s.id,balance:x,token:d,redirect:`/transact?${a}`}).toString();throw n(h),l}else i.success("You must be logged in to buy stock"),n("/login")},P=async t=>{f?(await y.sellStock(s.id,t,d)).status===200&&(i.success("Your sell order has been placed or completed successfully"),n("/dashboard")):(i.success("You must be logged in to sell your stock"),n("/login"))},S=({transactionType:t,balance:l})=>{const[a,m]=b.useState(0),[r,u]=b.useState(0),j=async o=>{if(o.preventDefault(),typeof a=="number"&&a>s.maxPricePerShare)i.error("Your buy price cannot exceed the maximum allowed price per share");else if(typeof a=="number"&&a>0&&window.confirm(`Are you sure you want to buy at $${r}?`))try{await v(a)}catch(c){console.error(c)}},h=async o=>{if(o.preventDefault(),typeof r=="number"&&r>s.maxPricePerShare)i.error("Your sell price cannot exceed the maximum allowed price per share");else if(typeof r=="number"&&r>0&&window.confirm(`Are you sure you want to sell at $${r}?`))try{await P(r)}catch(c){console.error(c)}},g=o=>p=>{const c=p.target.value;(c===""||/^\d+(\.\d{0,2})?$/.test(c))&&o(Number(c))};return t==="Buy"?e.jsx("div",{className:"p-4 w-full sm:w-3/4 lg:w-1/4 mx-auto flex justify-center shadow-2xl mt-3 mb-3 rounded-xl",children:e.jsxs("form",{onSubmit:j,className:"flex flex-col items-center space-y-4",children:[l!==null&&e.jsxs(e.Fragment,{children:[e.jsx("label",{htmlFor:"balance",className:"text-md font-semibold",children:"Account Balance"}),e.jsxs("p",{className:"text-lg",children:["$",Number(l).toFixed(2)]})]}),e.jsx("label",{htmlFor:"buyPrice",className:"text-xl font-semibold",children:"Buy Price"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-xl",children:"$"}),e.jsx("input",{type:"number",value:a,onChange:g(m),placeholder:"Enter buy price",className:"py-2 px-4 rounded-xl text-xl",step:"0.01"})]}),e.jsx("div",{className:"text-md text-right w-full",children:"Transaction Fee: $0.10"}),e.jsxs("div",{className:"text-xl text-right w-full",children:["Buy Price:",e.jsxs("span",{className:"text-2xl text-blue-600",children:[" $",(a?a+.1:0).toFixed(2)]})]}),e.jsx("button",{type:"submit",className:"bg-green-500 text-white py-4 px-10 rounded-xl text-2xl w-full",children:"Buy"})]})}):e.jsx("div",{className:"p-4 w-full sm:w-3/4 lg:w-1/4 mx-auto flex justify-center shadow-2xl mt-3 mb-3 rounded-xl",children:e.jsxs("form",{onSubmit:h,className:"flex flex-col items-center space-y-4",children:[e.jsx("label",{htmlFor:"sellPrice",className:"text-xl font-semibold",children:"Sell Price"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-xl",children:"$"}),e.jsx("input",{type:"number",value:r,onChange:g(u),placeholder:"Enter sell price",className:"py-2 px-4 rounded-xl text-xl",step:"0.01"})]}),e.jsx("div",{className:"text-md text-left w-full",children:"Transaction Fee: $0.10"}),e.jsxs("div",{className:"text-xl text-left w-full",children:["Sale Revenue:",e.jsxs("span",{className:"text-2xl text-blue-600",children:[" $",(r?r-.1:0).toFixed(2)]})]}),e.jsx("button",{type:"submit",className:"bg-red-500 text-white py-4 px-10 rounded-xl text-2xl w-full",children:"Sell"})]})})},$=()=>e.jsx("div",{className:"bg-blue-400",children:e.jsx("div",{className:"p-4 w-full sm:w-3/4 mx-auto",children:e.jsxs("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-3 text-center lg:text-left",children:"Sell Orders"}),e.jsxs("table",{className:"min-w-full bg-white rounded-lg",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-2 px-4 border-b text-left",children:"Price"}),e.jsx("th",{className:"py-2 px-4 border-b text-left",children:"Date"})]})}),e.jsx("tbody",{children:s.sellOrders.map((t,l)=>e.jsxs("tr",{children:[e.jsxs("td",{className:"py-2 px-4 border-b",children:["$",t.amount.toFixed(2)]}),e.jsx("td",{className:"py-2 px-4 border-b",children:new Date(t.tradeDate).toLocaleDateString()})]},l))})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-3 text-center lg:text-left",children:"Buy Orders"}),e.jsxs("table",{className:"min-w-full bg-white rounded-lg",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-2 px-4 border-b text-left",children:"Price"}),e.jsx("th",{className:"py-2 px-4 border-b text-left",children:"Date"})]})}),e.jsx("tbody",{children:s.buyOrders.map((t,l)=>e.jsxs("tr",{children:[e.jsxs("td",{className:"py-2 px-4 border-b",children:["$",t.amount.toFixed(2)]}),e.jsx("td",{className:"py-2 px-4 border-b",children:new Date(t.tradeDate).toLocaleDateString()})]},l))})]})]})]})})});return e.jsxs("div",{children:[e.jsx(F,{position:"top-center"}),e.jsx("div",{className:"bg-gray-200",children:B?e.jsxs("div",{className:"flex flex-col w-3/4 mx-auto p-4",children:[e.jsx("div",{className:"flex items-start flex-col justify-between items-center mb-4",children:e.jsx("img",{src:s.logo,alt:`${s.name} Logo`,className:"w-16 h-16 object-contain mb-2 sm:mb-0"})}),e.jsxs("div",{className:"flex flex-col sm:items-start",children:[e.jsx("h1",{className:"text-2xl font-bold sm:text-left",children:s.name}),e.jsx("p",{className:"sm:text-left",children:s.location})]}),e.jsxs("div",{className:"text-center mt-5",children:[e.jsxs("p",{className:"text-3xl font-semibold",children:["$",s.maxPricePerShare.toFixed(2)]}),e.jsxs("p",{className:`text-lg ${s.growthPercentage>=0?"text-green-500 ":"text-red-500"}`,children:[s.growthPercentage>=0?"+":"",s.growthPercentage.toFixed(2),"%"]})]})]}):e.jsxs("div",{className:"flex flex-col w-3/4 mx-auto p-4",children:[e.jsx("div",{className:"flex items-start justify-between items-center mb-4",children:e.jsx("img",{src:s.logo,alt:`${s.name} Logo`,className:"w-16 h-16 object-contain mb-2"})}),e.jsxs("div",{className:"flex justify-between items-center w-full",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("h1",{className:"text-2xl font-bold",children:s.name}),e.jsx("p",{children:s.location})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-3xl font-semibold",children:["$",s.maxPricePerShare.toFixed(2)]}),e.jsxs("p",{className:`text-lg ${s.growthPercentage>=0?"text-green-500 ":"text-red-500"}`,children:[s.growthPercentage>=0?"+":"",s.growthPercentage.toFixed(2),"%"]})]})]})]})}),e.jsx(S,{transactionType:N,balance:x?Number(x):null}),$()]})}export{M as default};
//# sourceMappingURL=index-BA_PYQ8o.js.map
