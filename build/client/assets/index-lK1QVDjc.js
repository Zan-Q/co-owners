import{r as c,c as i,j as d}from"./jsx-runtime-D2HyDbKh.js";import{L as P,G as R,M as B}from"./esm-CLJVFegd.js";import{a as f}from"./axiosConfig-D5-diGNX.js";import{a as G}from"./index-PxjvPj8E.js";const U={getAnnoucements:async function(){return(await f.request({url:"/general/announcements",method:"GET"})).data},getTrendingBusinesses:async function(e){return(await f.request({url:"/general/trendingBusinesses",method:"GET"})).data},getDownTrendingBusinesses:async function(e,t,r,n,a){return(await f.request({url:"/general/downtrendingBusinesses",method:"GET"})).data},getLocalCompanies:async function(e,t){return(await f.request({url:"/general/localBusinesses",method:"GET",params:{latitude:e,longitude:t}})).data},getPublicCompany:async function(e){return(await f.request({url:"/general/getStock",method:"GET",params:{businessId:e}})).data}},j={lat:52.1505506,lng:-106.7468104};function D(){const[e,t]=c.useState(null);return c.useEffect(()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(r=>{t({lat:r.coords.latitude,lng:r.coords.longitude})},r=>{console.error("Error getting user location:",r),t(j)}):t(j)},[]),e}var x={},u={};Object.defineProperty(u,"__esModule",{value:!0});u.cssValue=u.parseLengthAndUnit=void 0;var I={cm:!0,mm:!0,in:!0,px:!0,pt:!0,pc:!0,em:!0,ex:!0,ch:!0,rem:!0,vw:!0,vh:!0,vmin:!0,vmax:!0,"%":!0};function L(e){if(typeof e=="number")return{value:e,unit:"px"};var t,r=(e.match(/^[0-9.]*/)||"").toString();r.includes(".")?t=parseFloat(r):t=parseInt(r,10);var n=(e.match(/[^0-9]*$/)||"").toString();return I[n]?{value:t,unit:n}:(console.warn("React Spinners: ".concat(e," is not a valid css value. Defaulting to ").concat(t,"px.")),{value:t,unit:"px"})}u.parseLengthAndUnit=L;function T(e){var t=L(e);return"".concat(t.value).concat(t.unit)}u.cssValue=T;var g={};Object.defineProperty(g,"__esModule",{value:!0});g.createAnimation=void 0;var V=function(e,t,r){var n="react-spinners-".concat(e,"-").concat(r);if(typeof window>"u"||!window.document)return n;var a=document.createElement("style");document.head.appendChild(a);var o=a.sheet,l=`
    @keyframes `.concat(n,` {
      `).concat(t,`
    }
  `);return o&&o.insertRule(l,0),n};g.createAnimation=V;var p=i&&i.__assign||function(){return p=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},p.apply(this,arguments)},q=i&&i.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),X=i&&i.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Y=i&&i.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&q(t,e,r);return X(t,e),t},Z=i&&i.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r};Object.defineProperty(x,"__esModule",{value:!0});var y=Y(c),_=u,M=g,$=(0,M.createAnimation)("RingLoader","0% {transform: rotateX(0deg) rotateY(0deg) rotateZ(0deg)} 100% {transform: rotateX(180deg) rotateY(360deg) rotateZ(360deg)}","right"),F=(0,M.createAnimation)("RingLoader","0% {transform: rotateX(0deg) rotateY(0deg) rotateZ(0deg)} 100% {transform: rotateX(360deg) rotateY(180deg) rotateZ(360deg)}","left");function N(e){var t=e.loading,r=t===void 0?!0:t,n=e.color,a=n===void 0?"#000000":n,o=e.speedMultiplier,l=o===void 0?1:o,s=e.cssOverride,E=s===void 0?{}:s,b=e.size,v=b===void 0?60:b,S=Z(e,["loading","color","speedMultiplier","cssOverride","size"]),w=(0,_.parseLengthAndUnit)(v),m=w.value,h=w.unit,A=p({display:"inherit",width:(0,_.cssValue)(v),height:(0,_.cssValue)(v),position:"relative"},E),O=function(C){return{position:"absolute",top:"0",left:"0",width:"".concat(m).concat(h),height:"".concat(m).concat(h),border:"".concat(m/10).concat(h," solid ").concat(a),opacity:"0.4",borderRadius:"100%",animationFillMode:"forwards",perspective:"800px",animation:"".concat(C===1?$:F," ").concat(2/l,"s 0s infinite linear")}};return r?y.createElement("span",p({style:A},S),y.createElement("span",{style:O(1)}),y.createElement("span",{style:O(2)})):null}var z=x.default=N;const K={lat:52.1505506,lng:-106.7468104};function Q(){const[e,t]=c.useState(null),r=G(),n=D(),a=c.useCallback(o=>{r(`/stocks/${o}`)},[r]);return c.useEffect(()=>{n&&U.getLocalCompanies(n.lat,n.lng).then(o=>{const l=o.map(s=>({id:s._id,name:s.name,coordinates:s.coordinates}));t(l)})},[n]),e?d.jsx(P,{googleMapsApiKey:"AIzaSyCn_0w1J9f-e1m7YKb59DhsRIftV05XU7A",children:d.jsx(R,{mapContainerStyle:{width:"100%",height:"100vh"},center:n||K,zoom:10,children:e.map(o=>d.jsx(B,{position:{lat:o.coordinates.coordinates[1],lng:o.coordinates.coordinates[0]},onClick:()=>a(o.id)},o.id))})}):d.jsx("div",{className:"flex justify-center items-center h-screen",children:d.jsx(z,{color:"#000080",loading:!0,size:100,"aria-label":"Loading Maps"})})}export{Q as default};
//# sourceMappingURL=index-lK1QVDjc.js.map
