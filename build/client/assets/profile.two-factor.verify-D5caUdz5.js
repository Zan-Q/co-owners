import{j as e}from"./jsx-runtime-D2HyDbKh.js";import{z as t}from"./index-BeXw7Xwl.js";import{u as h,g as f,a as x,O as y,b as j,E as g}from"./forms-Dd4gJQEl.js";import{I as v}from"./icon-DNfY9fbA.js";import{S as m}from"./status-button-trRbWWOl.js";import{u as b}from"./misc-BxwGVpjn.js";import{b as w,a as N,F as S}from"./components-BulwabtP.js";import{n as F}from"./index-PxjvPj8E.js";import{p as I}from"./parse-DONhxXj2.js";import"./index-tx3aR2qd.js";import"./index-4Ns2fbOC.js";import"./button-BOdK6DJc.js";import"./tooltip-eZifkrgt.js";import"./clsx-B-dksMZM.js";import"./index-Cd_vq22D.js";const W={breadcrumb:e.jsx(v,{name:"check",children:"Verify"}),getSitemapEntries:()=>null},P=t.object({intent:t.literal("cancel")}),C=t.object({intent:t.literal("verify"),code:t.string().min(6).max(6)}),d=t.discriminatedUnion("intent",[P,C]);function G(){var l;const r=w(),o=N(),u=F(),n=b(),i=n?(l=u.formData)==null?void 0:l.get("intent"):null,[s,a]=h({id:"verify-form",constraint:f(d),lastResult:o==null?void 0:o.result,onValidate({formData:p}){return I(p,{schema:d})}}),c=a.intent.value;return e.jsx("div",{children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx("img",{alt:"qr code",src:r.qrCode,className:"h-56 w-56"}),e.jsx("p",{children:"Scan this QR code with your authenticator app."}),e.jsx("p",{className:"text-sm",children:"If you cannot scan the QR code, you can manually add this account to your authenticator app using this code:"}),e.jsx("div",{className:"p-3",children:e.jsx("pre",{className:"whitespace-pre-wrap break-all text-sm","aria-label":"One-time Password URI",children:r.otpUri})}),e.jsx("p",{className:"text-sm",children:"Once you've added the account, enter the code from your authenticator app below. Once you enable 2FA, you will need to enter a code from your authenticator app every time you log in or perform important actions. Do not lose access to your authenticator app, or you will lose access to your account."}),e.jsx("div",{className:"flex w-full max-w-xs flex-col justify-center gap-4",children:e.jsxs(S,{method:"POST",...x(s),className:"flex-1",children:[e.jsx("div",{className:"flex items-center justify-center",children:e.jsx(y,{labelProps:{htmlFor:a.code.id,children:"Code"},inputProps:{...j(a.code,{type:"text"}),autoFocus:!0,autoComplete:"one-time-code"},errors:a.code.errors})}),e.jsx("div",{className:"min-h-[32px] px-4 pb-3 pt-1",children:e.jsx(g,{id:s.errorId,errors:s.errors})}),e.jsxs("div",{className:"flex justify-between gap-4",children:[e.jsx(m,{className:"w-full",status:i==="verify"?"pending":c==="verify"?s.status??"idle":"idle",type:"submit",name:"intent",value:"verify",children:"Submit"}),e.jsx(m,{className:"w-full",variant:"secondary",status:i==="cancel"?"pending":c==="cancel"?s.status??"idle":"idle",type:"submit",name:"intent",value:"cancel",disabled:n,children:"Cancel"})]})]})})]})})}export{G as default,W as handle};
//# sourceMappingURL=profile.two-factor.verify-D5caUdz5.js.map
