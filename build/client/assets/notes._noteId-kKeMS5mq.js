import{j as e}from"./jsx-runtime-D2HyDbKh.js";import{G as x}from"./error-boundary-BSGQcXDS.js";import{f as p}from"./floating-toolbar-B1U7BWws.js";import{u,g as h,E as j}from"./forms-pZ2rD6vG.js";import{B as f}from"./button-BTFmWHin.js";import{I as i}from"./icon-CldSu2rP.js";import{S as N}from"./status-button-jM1d2HtI.js";import{b as m,u as g}from"./misc-D_OAexT3.js";import{u as b,a as w}from"./user-BEA_DXvQ.js";import{b as y,L as v,a as I,F as E}from"./components-7CkHrf4S.js";import"./index-PxjvPj8E.js";import"./exports-BPTENwJi.js";import"./submission-BBd9SSur.js";import"./index-tx3aR2qd.js";import"./index-4Ns2fbOC.js";import"./tooltip-DXoIDLmn.js";import"./clsx-B-dksMZM.js";import"./index-Cd_vq22D.js";function z(){const s=y(),n=b(),o=(n==null?void 0:n.id)===s.note.ownerId,t=w(n,o?"delete:note:own":"delete:note:any"),a=t||o;return e.jsxs("div",{className:"absolute inset-0 flex flex-col px-10",children:[e.jsx("h2",{className:"mb-2 pt-12 text-h2 lg:mb-6",children:s.note.title}),e.jsxs("div",{className:`${a?"pb-24":"pb-12"} overflow-y-auto`,children:[e.jsx("ul",{className:"flex flex-wrap gap-5 py-5",children:s.note.images.map(r=>e.jsx("li",{children:e.jsx("a",{href:m(r.id),children:e.jsx("img",{src:m(r.id),alt:r.altText??"",className:"h-32 w-32 rounded-lg object-cover"})})},r.id))}),e.jsx("p",{className:"whitespace-break-spaces text-sm md:text-lg",children:s.note.content})]}),a?e.jsxs("div",{className:p,children:[e.jsx("span",{className:"text-sm text-foreground/90 max-[524px]:hidden",children:e.jsxs(i,{name:"clock",className:"scale-125",children:[s.timeAgo," ago"]})}),e.jsxs("div",{className:"grid flex-1 grid-cols-2 justify-end gap-2 min-[525px]:flex md:gap-4",children:[t?e.jsx(B,{id:s.note.id}):null,e.jsx(f,{asChild:!0,className:"min-[525px]:max-md:aspect-square min-[525px]:max-md:px-0",children:e.jsx(v,{to:"edit",children:e.jsx(i,{name:"pencil-1",className:"scale-125 max-md:scale-150",children:e.jsx("span",{className:"max-md:hidden",children:"Edit"})})})})]})]}):null]})}function B({id:s}){const n=I(),o=g(),[t]=u({id:"delete-note",lastResult:n==null?void 0:n.result});return e.jsxs(E,{method:"POST",...h(t),children:[e.jsx("input",{type:"hidden",name:"noteId",value:s}),e.jsx(N,{type:"submit",name:"intent",value:"delete-note",variant:"destructive",status:o?"pending":t.status??"idle",disabled:o,className:"w-full max-md:aspect-square max-md:px-0",children:e.jsx(i,{name:"trash",className:"scale-125 max-md:scale-150",children:e.jsx("span",{className:"max-md:hidden",children:"Delete"})})}),e.jsx(j,{errors:t.errors,id:t.errorId})]})}const J=({data:s,params:n,matches:o})=>{var l;const t=o.find(d=>d.id==="routes/users+/$username_+/notes"),a=((l=t==null?void 0:t.data)==null?void 0:l.owner.name)??n.username,r=(s==null?void 0:s.note.title)??"Note",c=s&&s.note.content.length>100?(s==null?void 0:s.note.content.slice(0,97))+"...":"No content";return[{title:`${r} | ${a}'s Notes | Epic Notes`},{name:"description",content:c}]};function K(){return e.jsx(x,{statusHandlers:{403:()=>e.jsx("p",{children:"You are not allowed to do that"}),404:({params:s})=>e.jsxs("p",{children:['No note with the id "',s.noteId,'" exists']})}})}export{K as ErrorBoundary,z as default,J as meta};
//# sourceMappingURL=notes._noteId-kKeMS5mq.js.map
