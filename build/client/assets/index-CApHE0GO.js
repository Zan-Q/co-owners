import{r as p,j as e}from"./jsx-runtime-D2HyDbKh.js";import{B as a,Q as $,t as g}from"./transactionAPI-Buwv9ga5.js";/* empty css                      */import{i as F}from"./lib-Le9o1phv.js";import{b as D}from"./components-7CkHrf4S.js";import{a as B}from"./index-PxjvPj8E.js";import"./axiosConfig-D5-diGNX.js";import"./clsx-B-dksMZM.js";import"./index-Cd_vq22D.js";function T(){const{business:s,transactionType:y,balance:n,token:o,message:N}=D(),[b,L]=p.useState(!!o),c=B();N&&a.success("Deposit Successful");const w=async l=>{if(b)try{const t=await g.buyStock(s.id,l,o);t&&t.status===200&&(a.success("Your buy order has been placed or completed successfully"),c("/dashboard"))}catch(t){const d=new URLSearchParams({type:"Buy",businessId:s.id,balance:n,message:"deposit"}).toString(),r=Math.ceil((l*.029+.3)*100)/100,m=Math.ceil((l+r+.1)*100)/100,x="/stripe?"+new URLSearchParams({amount:m.toFixed(2).toString(),businessId:s.id,balance:n,token:o,redirect:`/transact?${d}`}).toString();throw c(x),t}else a.success("You must be logged in to buy stock"),c("/login")},v=async l=>{b?(await g.sellStock(s.id,l,o)).status===200&&(a.success("Your sell order has been placed or completed successfully"),c("/dashboard")):(a.success("You must be logged in to sell your stock"),c("/login"))},P=l=>{const[t,d]=p.useState(0),[r,f]=p.useState(0),m=i=>{i.preventDefault(),typeof t=="number"&&t>s.maxPricePerShare?a.error("Your buy price cannot exceed the maximum allowed price per share"):typeof t=="number"&&t>0&&window.confirm(`Are you sure you want to buy at $${r}?`)&&w(t)},j=i=>{i.preventDefault(),typeof r=="number"&&r>s.maxPricePerShare?a.error("Your sell price cannot exceed the maximum allowed price per share"):typeof r=="number"&&r>0&&window.confirm(`Are you sure you want to sell at $${r}?`)&&v(r)},x=i=>u=>{const h=u.target.value;(h===""||/^\d+(\.\d{0,2})?$/.test(h))&&i(Number(h))};return l==="Buy"?e.jsx("div",{className:"p-4 w-full sm:w-3/4 lg:w-1/4 mx-auto flex justify-center shadow-2xl mt-3 mb-3 rounded-xl",children:e.jsxs("form",{onSubmit:m,className:"flex flex-col items-center space-y-4",children:[n!==null&&e.jsxs(e.Fragment,{children:[e.jsx("label",{htmlFor:"balance",className:"text-md font-semibold",children:"Account Balance"}),e.jsxs("p",{className:"text-lg",children:["$",Number(n).toFixed(2)]})]}),e.jsx("label",{htmlFor:"buyPrice",className:"text-xl font-semibold",children:"Buy Price"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-xl",children:"$"}),e.jsx("input",{type:"number",value:t,onChange:x(d),placeholder:"Enter buy price",className:"py-2 px-4 rounded-xl text-xl",step:"0.01"})]}),e.jsx("div",{className:"text-md text-right w-full",children:"Transaction Fee: $0.10"}),e.jsxs("div",{className:"text-xl text-right w-full",children:["Buy Price:",e.jsxs("span",{className:"text-2xl text-blue-600",children:[" $",(t?t+.1:0).toFixed(2)]})]}),e.jsx("button",{type:"submit",className:"bg-green-500 text-white py-4 px-10 rounded-xl text-2xl w-full",children:"Buy"})]})}):e.jsx("div",{className:"p-4 w-full sm:w-3/4 lg:w-1/4 mx-auto flex justify-center shadow-2xl mt-3 mb-3 rounded-xl",children:e.jsxs("form",{onSubmit:j,className:"flex flex-col items-center space-y-4",children:[e.jsx("label",{htmlFor:"sellPrice",className:"text-xl font-semibold",children:"Sell Price"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-xl",children:"$"}),e.jsx("input",{type:"number",value:r,onChange:x(f),placeholder:"Enter sell price",className:"py-2 px-4 rounded-xl text-xl",step:"0.01"})]}),e.jsx("div",{className:"text-md text-left w-full",children:"Transaction Fee: $0.10"}),e.jsxs("div",{className:"text-xl text-left w-full",children:["Sale Revenue:",e.jsxs("span",{className:"text-2xl text-blue-600",children:[" $",(r?r-.1:0).toFixed(2)]})]}),e.jsx("button",{type:"submit",className:"bg-red-500 text-white py-4 px-10 rounded-xl text-2xl w-full",children:"Sell"})]})})},S=()=>e.jsx("div",{className:"bg-blue-400",children:e.jsx("div",{className:"p-4 w-full sm:w-3/4 mx-auto",children:e.jsxs("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-3 text-center lg:text-left",children:"Sell Orders"}),e.jsxs("table",{className:"min-w-full bg-white rounded-lg",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-2 px-4 border-b text-left",children:"Price"}),e.jsx("th",{className:"py-2 px-4 border-b text-left",children:"Date"})]})}),e.jsx("tbody",{children:s.sellOrders.map((l,t)=>e.jsxs("tr",{children:[e.jsxs("td",{className:"py-2 px-4 border-b",children:["$",l.amount.toFixed(2)]}),e.jsx("td",{className:"py-2 px-4 border-b",children:new Date(l.tradeDate).toLocaleDateString()})]},t))})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-3 text-center lg:text-left",children:"Buy Orders"}),e.jsxs("table",{className:"min-w-full bg-white rounded-lg",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-2 px-4 border-b text-left",children:"Price"}),e.jsx("th",{className:"py-2 px-4 border-b text-left",children:"Date"})]})}),e.jsx("tbody",{children:s.buyOrders.map((l,t)=>e.jsxs("tr",{children:[e.jsxs("td",{className:"py-2 px-4 border-b",children:["$",l.amount.toFixed(2)]}),e.jsx("td",{className:"py-2 px-4 border-b",children:new Date(l.tradeDate).toLocaleDateString()})]},t))})]})]})]})})});return e.jsxs("div",{children:[e.jsx($,{position:"top-center"}),e.jsx("div",{className:"bg-gray-200",children:F?e.jsxs("div",{className:"flex flex-col w-3/4 mx-auto p-4",children:[e.jsx("div",{className:"flex items-start flex-col justify-between items-center mb-4",children:e.jsx("img",{src:s.logo,alt:`${s.name} Logo`,className:"w-16 h-16 object-contain mb-2 sm:mb-0"})}),e.jsxs("div",{className:"flex flex-col sm:items-start",children:[e.jsx("h1",{className:"text-2xl font-bold sm:text-left",children:s.name}),e.jsx("p",{className:"sm:text-left",children:s.location})]}),e.jsxs("div",{className:"text-center mt-5",children:[e.jsxs("p",{className:"text-3xl font-semibold",children:["$",s.maxPricePerShare.toFixed(2)]}),e.jsxs("p",{className:`text-lg ${s.growthPercentage>=0?"text-green-500 ":"text-red-500"}`,children:[s.growthPercentage>=0?"+":"",s.growthPercentage.toFixed(2),"%"]})]})]}):e.jsxs("div",{className:"flex flex-col w-3/4 mx-auto p-4",children:[e.jsx("div",{className:"flex items-start justify-between items-center mb-4",children:e.jsx("img",{src:s.logo,alt:`${s.name} Logo`,className:"w-16 h-16 object-contain mb-2"})}),e.jsxs("div",{className:"flex justify-between items-center w-full",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("h1",{className:"text-2xl font-bold",children:s.name}),e.jsx("p",{children:s.location})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-3xl font-semibold",children:["$",s.maxPricePerShare.toFixed(2)]}),e.jsxs("p",{className:`text-lg ${s.growthPercentage>=0?"text-green-500 ":"text-red-500"}`,children:[s.growthPercentage>=0?"+":"",s.growthPercentage.toFixed(2),"%"]})]})]})]})}),P(y),S()]})}export{T as default};
//# sourceMappingURL=index-CApHE0GO.js.map
